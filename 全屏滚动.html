<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Document</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no">
    <style>
        * {
            margin: 0;
            padding: 0;
        }
        
        li {
            line-height: 300px;
            text-align: center;
            font-size: 100px;
            list-style: none;
        }
        
        li:nth-child(1) {
            background: red;
        }
        
        li:nth-child(2) {
            background: yellow;
        }
        
        li:nth-child(3) {
            background: green;
        }
        
        li:nth-child(4) {
            background: blue;
        }
    </style>
</head>

<body>
    <div class="aaa">
        <ul class="bbb">
            <li>1</li>
            <li>2</li>
            <li>3</li>
            <li>4</li>
        </ul>
    </div>
    <script>
        function Fullscroll(option) {
            this.wrapper = document.querySelector(option.wrapper);
            this.container = document.querySelector(option.container);
            this.aLi = document.querySelectorAll(option.items);
            this.isFollow = option.isFollow || false;
            this.speed = option.speed || .5;
            this.top = 0;
            this.now = 0;
            this.downX;
            this.disX;
            this.init(this);
        }
        Fullscroll.prototype = {
            init: function(_this) {
                this.wrapper.style.height =  '100vh';
                this.wrapper.style.overflow = 'hidden';
                for (var i = 0; i < this.aLi.length; i++) {
                    this.aLi[i].style.height = '100vh';
                    this.aLi[i].style.overflow = 'hidden';
                }
                document.documentElement.addEventListener('touchmove', function() {
                    event.preventDefault();
                });
                this.wrapper.addEventListener("touchstart", function() {
                    _this.mouseDown(_this);
                });
                if (this.isFollow) this.wrapper.addEventListener("touchmove", function() {
                    _this.mouseMove(_this);
                });
                this.wrapper.addEventListener("touchend", function() {
                    _this.mouseEnd(_this);
                });
            },
            mouseDown: function(_this) {
                _this.container.style.WebkitTransition = '';
                _this.downX = event.targetTouches[0].clientY;
                _this.disX = _this.downX - _this.top;

            },
            mouseMove: function(_this) {
                var moveX = event.targetTouches[0].clientY;
                _this.top = moveX - _this.disX;
                if (_this.top >= 0) {
                    _this.top = 0;
                }
                if (_this.top <= -_this.container.offsetHeight + _this.aLi[0].offsetHeight) {
                    _this.top = -_this.container.offsetHeight + _this.aLi[0].offsetHeight;
                }
                _this.container.style.transform = "translateY(" + _this.top + "px)";
            },
            mouseEnd: function(_this) {
                var upX = event.changedTouches[0].clientY;
                if (upX - _this.downX > _this.aLi[0].offsetHeight / 4) {
                    _this.now--;
                    if (_this.now <= 0) _this.now = 0;
                }
                if (upX - _this.downX < -_this.aLi[0].offsetHeight / 4) {
                    _this.now++;
                    if (_this.now == _this.aLi.length) _this.now = _this.aLi.length - 1;
                }
                _this.top = -_this.now * _this.aLi[0].offsetHeight;
                _this.container.style.WebkitTransition = 'transform ' + _this.speed + 's ease-out';
                _this.container.style.transform = "translateY(" + _this.top + "px)";
                _this.wrapper.removeEventListener('touchmove', function() {
                    _this.mouseMove(_this);
                });
                _this.wrapper.removeEventListener('touchend', function() {
                    _this.mouseEnd(_this);
                });
            },
            constructor: Fullscroll
        };
        var app1 = new Fullscroll({
            /*必传参数*/
            wrapper: '.aaa', // 外面的盒子
            container: '.bbb', // 里面滚的盒子
            items: '.bbb li', // 每一页
            /*可配置参数*/
            isFollow: true, // 页面是否跟随手指，默认false
            speed: .6 // 滚动速度，单位秒，默认.5
        });
    </script>
</body>
</html>
